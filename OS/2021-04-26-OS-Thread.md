## Thread
- 하나의 프로세스에 여러 개의 스레드 생성이 가능하다.
- 스레드들은 동시에 실행도 가능하다.
- 프로세스 안에 있으니까 프로세스의 데이터를 모두 접근 가능하다.(IPC기법을 사용하지 않아도 된다.)

**프로세스 간에는 각 프로세스의 데이터 접근이 불가해서 IPC 통신기법을 사용했어야 했다...**

#### Thread의 구조
- Heap, BSS, Data, Code부분은 공유되는 공간이고, 스택영역에서 자리를 차지하고 있는 쓰레드는 분리된 공간을 가진다.

![쓰레드구조](./img/쓰레드구조.jpg)

이때, 중요한 점은 하나의 프로세스 안에 생성된 쓰레드끼리만 공유가 가능하다는 점이다.

#### Multi Thread
- 소프트웨어 병행 작업 처리를 위해 Multi Thread를 사용한다.

![멀티쓰레드](./img/멀티쓰레드.jpg)

그림은 보면 쓰레드 A와 B의  code, data, heap 영역은 부모 프로세스에서 공유가 된다. 하지만 부모 프로세스의 스택 영역에서 각각의 thread stack 영역을 따로 가진다.

#### 멀티 프로세싱과 Thread
- 최근 CPU는 멀티 코어를 가지므로, Thread를 여러 개 만들어서 멀티 코어의 활용도를 높인다.

![멀티프로세싱과쓰레드](./img/멀티프로세싱과쓰레드.jpg)

하나의 프로세스에 여러 CPU를 병렬 실행 시키면 실행속도 올라간다. 또한 여러 프로세스를 나누어서 여러 CPU 를 실행시켜서 실행속도를 올릴 수 있다. 

이러한 기술이 사용될 떄 멀티 쓰레드가 활용된다.

#### Thread 장점

1. 사용자에 대한 응답성 향상

![응답성](./img/응답성.jpg)

그림에서 보면 알겠지만 웹에서 서버와 클라이언트를 처리할 때, 응답성을 향상할 수 있다.

2. 자원 공유에 효율성

- IPC 기법과 같이 프로세스 간 자원 공유를 위해 번거로운 작업이 필요없다
- 프로세스 안에 있으므로, 프로세스의 데이터를 모두 접근 가능하다.

3. 작업이 분리되어 코드가 간결
- 사실 여러개의 프로세스를 만드는 것보다 간결해질 수는 있지만 작성하기 나름이다.

#### Thread 단점
- 쓰레드 중 한 쓰레드만 있어도, 전체 프로세스가 영향을 받는다



- 쓰레드를 많이 생성하면, Context Swiching이 많이 일어나 성능 저하가 일어난다.

eg) 리눅스 OS에서 Thread를 Process와 같이 다룸
- 쓰레드를 많이 생성하면, 모든 쓰레드를 스케줄링하면서 복잡도가 늘어나게 되고, Context Switching이 빈번할 수 밖에 없다.

#### Thread와 Process
- 프로세스는 독립적이고, 쓰레드는 종속적이다.
- 프로세스는 각각 독립적인 자원을 가지고, 쓰레드는 프로세스 자원을 공유한다.
- 프로세스는 자신만의 주소영역을 가지고, 쓰레드는 주소영역을 공유한다.
- 프로세스 간에는 IPC기법을 통해 통신해야 하고, 쓰레드는 필요하지 않다.
